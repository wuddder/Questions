<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<title>peer 2</title>
<style>
body {
    padding: 10px;
    color: #aaa;
}
.important {
    color: #333;
}
div#showDiv {
    width: 500px;
    height: 500px;
    background-color: #ffb;
}
div#inputDiv {
    width: 500px;
    height: 50px;
    background-color: #dd9;
}
</style>
</head>
<body>
    <div>
        <div id="showDiv"></div>
        <div id="inputDiv">
            <input type="text" placeholder="type here" id="input-text-box" />
            <button onclick="send();"></button>
            <button onclick="_send('yes');">Yes</button>
            <button onclick="_send('no');">No</button>
        </div>
    </div>
<script src="http://cdn.peerjs.com/0.3/peer.js"></script>
<script>
var peer = new Peer('steven-test-peer-30', {key: 'dja6wnq3hnoh6w29'});

// handle error
peer.on('error', function(error) {
    console.log('Peer error', error);
});

// connecting
var conn = peer.connect('steven-phase-30');
// var conn = null;

function _send(msg) {
    conn.send(msg);
}

peer.on('connection', function(connection) {
    conn = connection;
    conn.on('data', function(data) {
        // display on the screen
        console.log("receiving: " + data);
        document.getElementById('showDiv').innerHTML += "<span>" + data + "</span><br />";
    });
});

conn.on('data', function(data) {
    console.log("receiving: " + data);
});

function send() {
    var s = document.getElementById('input-text-box').value;
    if(s.length > 0 && conn != null) {
        _send(s);
        document.getElementById('input-text-box').value = "";
    }
}
</script>
</body>
</html>
